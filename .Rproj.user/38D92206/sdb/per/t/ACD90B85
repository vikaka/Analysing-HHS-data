{
    "contents" : "library(XML)\n\n#Q1 \n#Part 1 :\n#The Office of Intergovernmental and External Affairs hosts ten Regional Offices that directly serve state and local organizations. Each Regional Director ensures the Department maintains close contact with state, local, and tribal partners and addresses the needs of communities and individuals served through HHS programs and policies.\n\n#Part 2:\nUS.Flu.Data <- read.csv(\"C:/Users/Vishesh Kakarala/Desktop/Foundations of data science/HW 1/US Flu Data.csv\")\nUS.Flu.Data$Date = as.Date(US.Flu.Data$Date, format = \"%m/%d/%Y\")\n\n#HHS region  & states comparison\n\n# comparison between HHS region 2 and states -New york & New Jersey\n\n# In order to compare, we plot the data from the HHS region and the states data.\nplot(US.Flu.Data$Date, US.Flu.Data$HHS.Region.2..NJ..NY.,main = \"HHS region 2 Vs States\", type = \"p\", col = \"blue\", pch = 20)\npoints(US.Flu.Data$Date, US.Flu.Data$New.York, col = \"yellow\", pch = 20)\npoints(US.Flu.Data$Date, US.Flu.Data$New.Jersey, col = \"red\", pch = 20)\n\n# The states data is simlar to the HHS region except in the period from 2014 to 2016 where HHS region shows higher peak value and longer period of activity when compared to the state values\n\n#part3\n\n#grouping cities as States \n\nState_cities <- data.frame(US.Flu.Data$Date)\ncolnames(State_cities) <- \"Date\"\nState_cities$Date = as.Date(State_cities$Date, format = \"%m/%d/%Y\")\n\nState_cities$Alaska <- US.Flu.Data$Anchorage..AK\nState_cities$Alabama <- US.Flu.Data$Birmingham..AL\nState_cities$Arkansas <- US.Flu.Data$Little.Rock..AR\nState_cities$Arizona <- apply(US.Flu.Data[,67:71],1,function(x) mean(x,na.rm = TRUE))\nState_cities$California <- apply(US.Flu.Data[,72:82],1,function(x) mean(x,na.rm = TRUE))\nState_cities$Colorado <- apply(US.Flu.Data[,83:84],1,function(x) mean(x,na.rm = TRUE))\nState_cities$Florida <- apply(US.Flu.Data[,86:90],1,function(x) mean(x,na.rm = TRUE))\nState_cities$Georgia <- apply(US.Flu.Data[,91:92],1,function(x) mean(x,na.rm = TRUE))\nState_cities$Hawaii <- US.Flu.Data$Honolulu..HI\nState_cities$Iowa <- US.Flu.Data$Des.Moines..IA\nState_cities$Idaho <- US.Flu.Data$Boise..ID\nState_cities$Illinois <- US.Flu.Data$Chicago..IL\nState_cities$Indiana <- US.Flu.Data$Indianapolis..IN\nState_cities$Kansas <- US.Flu.Data$Wichita..KS\nState_cities$Kentucky <- US.Flu.Data$Lexington..KY\nState_cities$Louisiana <- US.Flu.Data$Baton.Rouge..LA\n\n#to understand the comparison between the cities and states data we take an example\n\n#comparing cities of Arizona with overall data from the state of Arizona\nsummary(US.Flu.Data$Arizona)\n\nsummary(State_cities$Arizona)\n\n#There are no Missing values and like to like comparison can be done\n\nboxplot(US.Flu.Data$Arizona,State_cities$Arizona, names = c(\"Arizona\",\"Cities Arizona\"),horizontal = TRUE)\n\n#Using a box plot we can visually determine the distribution of data and central tenedencies are similar for the state and cities grouping\n\n# Comparing cities from Alaska and the data of the entire State of Alaska\n\nsummary(US.Flu.Data$Alaska)\n\nsummary(State_cities$Alaska)\n\n# we find that there is missing data in both the columns.\n\n#We can populate missing data using interpolation, here Spline Interpolation is used to predict the missing values\n\nAlaska_interpol <- splinefun(US.Flu.Data$Alaska, y = US.Flu.Data$date, method = \"periodic\")\nUS.Flu.Data$Alaska[1:63]<-Alaska_interpol(1:63)\n\nAlaska_cities_interpol <- splinefun(State_cities$Alaska, y = State_cities$date, method = \"periodic\")\nState_cities$Alaska[1:55]<-Alaska_interpol(1:55)\n\n# Now we can compare the two columns of data\nsummary(US.Flu.Data$Alaska)\n\nsummary(State_cities$Alaska)\n\nboxplot(US.Flu.Data$Alaska,State_cities$Alaska)\n\n# here we find the two data sets to be similar.\n\n\n#q2\n\n#https://developers.google.com/public-data/docs/canonical/countries_csv\n\nworld_data <- read.csv(\"~/learning test/world_data.csv\")\nworld_data_2015 <- world_data[628:659,]\nflu_max <- data.frame(apply(world_data_2015[,2:30], 2,function(x) which.max(x)))\nrownames(flu_max) <- colnames(world_data_2015[2:30])\ncolnames(flu_max) <- \"Max_flu\"\nflu_max$Max_flu <- world_data_2015[c(flu_max$Max_flu),1]\nflu_max$Max_flu = as.Date(flu_max$Max_flu, format = \"%m/%d/%Y\")\n\nworld_lat <- read.csv(\"~/learning test/world_lat.csv\")\n\nrownames(world_lat) <- world_lat$name\n\nrownames(flu_max)[16]<- \"New Zealand\"\nrownames(flu_max)[28]<- \"United States\"\nrownames(flu_max)[23]<- \"South Africa\"\n\nflu_max$latitude <- world_lat[match(rownames(flu_max),rownames(world_lat)),]$latitude\n\nplot(flu_max$Max_flu,flu_max$latitude, main = \"Max week of Flu in 2015 Vs Central Latitude of countries\",xlab = \"Central Latitude\", ylab = \"Max week of Flu in 2015\", type = \"p\", col = \"blue\", pch = 20)\ntext(flu_max$Max_flu,flu_max$latitude,labels = row.names(flu_max),pos = 1)\n\n# It is clear from the graph that Flu search trends are seasonal depending on the position of the countries latitude above or below the equator. With flu search trends increasing in the peak winter season in the northern hemisphere and in the peak summer months in the souther hemisphere.\n#Q3 - Web Scraping\n# part a reading vaccine status Data\ntest_table <- readHTMLTable(\"http://www.cdc.gov/mmwr/preview/mmwrhtml/mm6401a4.htm?s_cid=mm6401\", header = TRUE, trim = TRUE)\ntable1 <- data.frame(test_table$`table-3`)\ntable1 = table1[-(1:3),]\ntable1 = table1[-38,]\ncolnames(table1) <- c(\"charecteristics\",\"Influenza_positive_no\",\"Influenza_positive_%\",\"Influenza_negative_no\",\"Influenza_negative_%\",\"Test_result_P_value\",\"vaccinated_status_no\",\"vaccinated_status_Total\",\"vaccinated_status_%\",\"vaccinated_status_pvalue\")\nrownames(table1) <- table1[,1]\ntable1<-table1[,-1]\n\n# Part B - example of a similar table- table showing Drug overdose and deaths by by sex, age, race and Hispanic origin, Census region, and state â€”United States, 2013 and 2014\n# from CDC's morbidity and mortality report(MMWR)\ntable_2 <- readHTMLTable(\"http://www.cdc.gov/mmwr/preview/mmwrhtml/mm6450a3.htm?s_cid=mm6450a3_w\")\ntable_2 <- table_2$`table-4`\n\nsignificance.lm <- lm(flu_max_2015)\n\n\n",
    "created" : 1455376618922.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2567188426",
    "id" : "ACD90B85",
    "lastKnownWriteTime" : 1455626895,
    "path" : "~/HW 1/HW 1.R",
    "project_path" : "HW 1.R",
    "properties" : {
        "notebook_format" : "word_document",
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}